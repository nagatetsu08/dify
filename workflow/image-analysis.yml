app:
  description: ç”»åƒã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹æ©Ÿèƒ½
  icon: ğŸ¤–
  icon_background: '#E4FBCC'
  mode: workflow
  name: ç”»åƒèªè­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/gemini:0.7.4@5faf411e694e0da130a337347a625a3812b1b7502a0183382d66d92c841bf05a
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        attachment_image_file_size_limit: 2
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        file_upload_limit: 20
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1769955924804-source-1769956037851-target
      selected: false
      source: '1769955924804'
      sourceHandle: source
      target: '1769956037851'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1769956037851-source-1769962718518-target
      selected: false
      source: '1769956037851'
      sourceHandle: source
      target: '1769962718518'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1769962718518-source-1770125405741-target
      selected: false
      source: '1769962718518'
      sourceHandle: source
      target: '1770125405741'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          default: ''
          hint: ''
          label: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„
          max_length: 48
          options: []
          placeholder: ''
          required: true
          type: file
          variable: input_file
      height: 109
      id: '1769955924804'
      position:
        x: -20
        y: 200
      positionAbsolute:
        x: -20
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        default_value:
        - key: text
          type: string
          value: è§£æã«å¤±æ•—ã—ã¾ã—ãŸ
        error_strategy: default-value
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: f4de0f69-a9b4-4cf0-96ef-b0fb1e49dc58
          role: system
          text: "ã‚ãªãŸã¯ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è³‡æ–™ã‚„åºƒå‘Šç”»åƒã‚’è§£æã™ã‚‹ã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒã‚’è§£æã—ã€ä»¥ä¸‹3é …ç›®ã‚’æ—¥æœ¬èªã§æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚\n\
            \n1. å•†å“å/ã‚µãƒ¼ãƒ“ã‚¹å\n2. ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n3. ãã®ä»–ã®æƒ…å ±\n\n## å¿…ãšæ¬¡ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ãã ã•ã„ã€‚\n- ç”»åƒã®ä¸­ã«ç›´æ¥æ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚„ã€ãƒ­ã‚´ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‹ã‚‰æ¨æ¸¬ã§ãã‚‹ç¯„å›²ã§æƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹ã€‚\n\
            \n- åˆ†ã‹ã‚‰ãªã„é …ç›®ã¯ç„¡ç†ã«æ¨æ¸¬ã›ãšã€Œä¸æ˜ã€ã¨è¨˜è¼‰ã™ã‚‹ã€‚\n- å‡ºåŠ›ã¯ Google ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã€JSONå½¢å¼ã§è¿”ã™ã€‚\n\
            \n- å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯å³å®ˆã—ã¦ãã ã•ã„:\n{\n  \"product_or_service_name\": \"ã“ã“ã«å•†å“å/ã‚µãƒ¼ãƒ“ã‚¹å\"\
            ,\n  \"main_message\": \"ã“ã“ã«ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\",\n  \"other_information\": \"ã“ã“ã«ãã®ä»–ã®æƒ…å ±ï¼ˆè£œè¶³ãƒ»æ³¨æ„æ›¸ããƒ»å‰²å¼•æƒ…å ±ãªã©ï¼‰\"\
            \n}"
        selected: false
        structured_output:
          schema:
            properties:
              main_message:
                description: æœ€ã‚‚å¼·èª¿ã•ã‚Œã¦ã„ã‚‹ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ã‚„ãƒ¡ã‚¤ãƒ³ã®è¨´æ±‚æ–‡ã€‚
                type: string
              other_information:
                description: è£œè¶³æƒ…å ±ã€æ³¨æ„æ›¸ãã€å‰²å¼•ã€è‘—è€…åãªã©ã€ä¸Šè¨˜ä»¥å¤–ã®é‡è¦ãªãƒ†ã‚­ã‚¹ãƒˆã€‚
                type: string
              product_or_service_name:
                description: ç”»åƒã‹ã‚‰æŠ½å‡ºã—ãŸå•†å“åã¾ãŸã¯ã‚µãƒ¼ãƒ“ã‚¹åã€‚ãƒ­ã‚´ã‚„ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚
                type: string
            required:
            - product_or_service_name
            - main_message
            type: object
        structured_output_enabled: true
        title: LLM
        type: llm
        vision:
          configs:
            detail: high
            variable_selector:
            - '1769955924804'
            - input_file
          enabled: true
      height: 124
      id: '1769956037851'
      position:
        x: 273.0349924997048
        y: 221
      positionAbsolute:
        x: 273.0349924997048
        y: 221
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        author: nagatetsu08
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹æ™‚ä»¥å¤–ã¯æŒ‡å®šã—ãªãã¦ã‚‚å•é¡Œãªã—","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1769956368934'
      position:
        x: 286
        y: 71
      positionAbsolute:
        x: 286
        y: 71
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        author: nagatetsu08
        desc: ''
        height: 143
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®æ›¸ãè¾¼ã¿ã¯æ±ç”¨æ€§ã«ã‹ã‘ã‚‹ã—ã€ã‚ã¡ã‚ƒãã¡ã‚ƒã‚„ã‚Šã«ãã„ã€‚ã‚‚ã—ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸è¿½è¨˜ã™ã‚‹è¦ä»¶ãŒã§ãŸå ´åˆã¯ã€webhookã§n8nã¸æ¸¡ã—ã¦å‡¦ç†ã—ãŸæ–¹ãŒã„ã„ã€‚ã“ã“ã§ã¯ä¸€æ—¦JSONå½¢å¼ã§å‡ºåŠ›","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ' (1)'
        type: ''
        width: 301
      height: 143
      id: '17699596807320'
      position:
        x: 624.7164968721787
        y: 40.10204853701785
      positionAbsolute:
        x: 624.7164968721787
        y: 40.10204853701785
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 301
    - data:
        code: "\nimport json\n\ndef main(arg1: dict, arg2: dict):\n    # arg1(LLMã®å‡ºåŠ›)ãŒæ–‡å­—åˆ—ã®å ´åˆã¯è¾æ›¸ã«å¤‰æ›\n\
          \    if isinstance(arg1, str):\n        try:\n            answer_data =\
          \ json.loads(arg1)\n        except:\n            answer_data = {\"raw_text\"\
          : arg1}\n    else:\n        answer_data = arg1\n\n    # æœ€çµ‚çš„ãªJSONæ§‹é€ ã‚’ä½œæˆ\n\
          \    result = {\n        \"data\": answer_data,\n        \"metadata\": {\n\
          \            \"usage\": arg2,  # ãƒˆãƒ¼ã‚¯ãƒ³æ•°\n            \"source\": \"Dify-Workflow\"\
          \n        }\n    }\n    # return {\n    #     \"result\": result\n    #\
          \ }\n    return {\n        \"result\": json.dumps(result, ensure_ascii=False)\n\
          \    }"
        code_language: python3
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: code_execute
        type: code
        variables:
        - value_selector:
          - '1769956037851'
          - structured_output
          value_type: object
          variable: arg1
        - value_selector:
          - '1769956037851'
          - usage
          value_type: object
          variable: arg2
      height: 52
      id: '1769962718518'
      position:
        x: 575.0349924997048
        y: 221
      positionAbsolute:
        x: 575.0349924997048
        y: 221
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-979
            key: ''
            type: text
            value: "{\n    \"result\": {{#1769962718518.result#}}\n}"
          type: json
        headers: ''
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: true
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        type: http-request
        url: https://XXXXXXX.example.com/webhook-test/write-imageinfo
        variables: []
      height: 153
      id: '1770125405741'
      position:
        x: 949.0407719956119
        y: 221
      positionAbsolute:
        x: 949.0407719956119
        y: 221
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -275.4260716143267
      y: 111.9721071060579
      zoom: 0.8428881385698592
  rag_pipeline_variables: []
